{% extends "./templates/main_template.html" %}
{% set body_classes = body_classes + " gestione-eventi-page" %}
{% set section = "gestioneventi" %}
{% set titolo_sezione = "Eventi Live"  %}
{% set descrizione_sezione = "Qui troverai tutte le informazioni sul prossimo evento."  %}
{% block mainContent %}
{{ super() }}
<div class="row inizialmente-nascosto visualizza_pagina_crea_evento">
    <div class="btn-group pull-center">
    <button type="button"
            class="btn btn-info inizialmente-nascosto visualizza_pagina_crea_evento"
            id="btn_visualizza_pagina_crea_evento"><i class="fa fa-plus"></i><br>Crea Evento</button>
    <button type="button"
            class="btn btn-info inizialmente-nascosto visualizza_pagina_crea_evento"
            id="btn_modifica_evento"><i class="fa fa-edit"></i><br>Modifica Evento</button>
    </div>
</div>
<h1 id="titolo_evento"></h1>
<div class="row">
    <div class="col-sm-6">
        <div class="box box-primary" id="info_base">
            <div class="box-header with-border">
                <h3 class="box-title">Informazioni Base</h3>
            </div>
            <div class="box-body">
                <table class="table table-hover table-striped">
                    <tbody>
                    <tr>
                        <td>Data Inizio</td>
                        <td><a id="data_inizio_evento"></a></td>
                    </tr>
                    <tr>
                        <td>Orario Inizio</td>
                        <td><a id="ora_inizio_evento"></a></td>
                    </tr>
                    <tr>
                        <td>Data Fine</td>
                        <td><a id="data_fine_evento"></a></td>
                    </tr>
                    <tr>
                        <td>Orario Inizio</td>
                        <td><a id="ora_fine_evento"></a></td>
                    </tr>
                    <tr>
                        <td>Costo Regolare</td>
                        <td><a id="costo_evento"></a></td>
                    </tr>
                    <tr>
                        <td>Costo Ritardatari</td>
                        <td><a id="costo_maggiorato_evento"></a></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col-sm-6">
        <div class="box box-primary" id="event_info_box">
            <div class="box-header with-border">
                <h3 class="box-title">Luogo</h3>
            </div>
            <div class="box-body">
                <p id="luogo_evento"></p>
                <div id="map" class="mappa-evento"></div>
            </div>
        </div>
    </div>
</div>

<div class="box box-primary" id="dettagli_evento">
    <div class="box-header with-border">
        <h3 class="box-title">Dettagli evento</h3>
    </div>
    <div class="box-body table-responsive">
        <p id="note_evento"></p>
    </div>
    <div class="box-footer">
        <button id="iscrivi_pg" class="btn btn-success">Iscrivi un tuo personaggio</button>
    </div>
</div>

<div class="box box-primary collapsed-box" id="partecipanti_evento">
    <div class="box-header with-border">
        <h3 class="box-title"><a data-widget="collapse">Partecipanti al prossimo evento</a></h3>
        <div class="box-tools pull-right">
            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i>
            </button>
        </div>
    </div>
    <div class="box-body table-responsive">
        <div class="btn-group pull-center out-of-box">
            <button type="button"
                class="btn btn-info inizialmente-nascosto stampaCartelliniPG"
                id="btn_stampaCartelliniPG"
                data-toggle="tooltip"
                data-placement="bottom"
                title="Stampa cartellini dei pg filtrati nella tabella sotto"><i class="fa fa-print"></i><br>Stampa Cartellini</button>
        </div>
        <form autocomplete="off" aria-autocomplete="none">
            <table id="partecipanti" class="table table-condensed table-hover table-striped table-bordered" width="100%">
                <thead>
                <tr>
                    <th>ID PG</th>
                    <th class="inizialmente-nascosto mostraPersonaggi_altri">Nome Giocatore</th>
                    <th>Nome Personaggio</th>
                    <th>Classi Civili</th>
                    <th>Classi Militari</th>
                    <th class="inizialmente-nascosto recupera_pagato_iscrizione">Pagato</th>
                    <th class="inizialmente-nascosto recupera_tipo_pagamento_iscrizione">Tipo Pagamento</th>
                    <th class="inizialmente-nascosto recupera_note_pagamento_iscrizione">Note</th>
                    <th class="inizialmente-nascosto stampaCartelliniPG">Azioni</th>
                </tr>
                </thead>
            </table>
        </form>
    </div>
</div>

<div class="box box-primary collapsed-box inizialmente-nascosto modificaPG_pc_personaggio modificaPG_px_personaggio" id="partecipanti_vecchio_evento">
    <div class="box-header with-border">
        <h3 class="box-title"><a data-widget="collapse">Partecipanti dell'ultimo evento passato</a></h3>
        <div class="box-tools pull-right">
            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i>
            </button>
        </div>
    </div>
    <div class="box-body table-responsive">
        <div class="btn-group pull-center out-of-box">
            <button type="button"
                    class="btn btn-info inizialmente-nascosto modificaPG_pc_personaggio"
                    id="btn_modificaPG_px_personaggio"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    title="Assegna punti ai pg iscritti all'ultimo evento"><i class="fa fa-edit"></i><br>Assegna Punti</button>
        </div>
        <form autocomplete="off" aria-autocomplete="none">
            <table id="vecchi_partecipanti" class="table table-condensed table-hover table-striped table-bordered" width="100%">
                <thead>
                <tr>
                    <th>ID PG</th>
                    <th>Nome Personaggio</th>
                    <th>Classi Civili</th>
                    <th>Classi Militari</th>
                    <th>Pagato</th>
                    <th>Tipo Pagamento</th>
                    <th>Note</th>
                    <th>Azioni</th>
                </tr>
                </thead>
            </table>
        </form>
    </div>
</div>

{% block modals %}
<div id="modal_iscrivi_pg" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" data-keyboard="false">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header dialog-header-primary">
                <button data-dismiss="modal" class="close" type="button">×<span class="sr-only">Chiudi</span></button>
                <h4 class="modal-title text-primary">Iscrivi Personaggio</h4>
            </div>
            <div class="modal-body">
                <form autocomplete="off" aria-autocomplete="none" class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Personaggio</label>
                        <div class="col-sm-9">
                            <select class="form-control" id="personaggio" placeholder="Seleziona Personaggio"></select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Pagato</label>
                        <div class="col-sm-9">
                            <div class='checkbox icheck'>
                            <input type='checkbox' id="pagato"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Metodo di Pagamento Usato</label>
                        <div class="col-sm-9">
                            <select class="form-control" id="metodo_pagamento" placeholder="Seleziona Metodo di Pagamento">
                                <option value="Location">Alla Location</option>
                                <option value="Manuale">Manuale</option>
                                <!--<option value="PayPal">PayPal</option>-->
                                <option value="PostePay">PostePay</option>
                                <option value="Bonifico">Bonifico</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Note</label>
                        <div class="col-sm-9">
                            <textarea class="form-control resize-vertical" id="note" name="note" placeholder="In caso di pagamento Manuale indica a chi è stato dato il saldo. Scrivici anche se ci raggiungi la sera prima dell'inizio dell'evento." rows="5"></textarea>
                        </div>
                    </div>
                </form>
                <div class="callout callout-warning">
                    <p>Una volta iscritto il personaggio non potrai pi&ugrave; ritirarlo a meno di comunicazioni con lo staff.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success submit-btn" data-dismiss="modal" id="btn_iscrivi">Iscrivi</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Chiudi</button>
            </div>
        </div>
    </div>
</div>
{{ super() }}
{% endblock %}

{% endblock %}
{% block managers %}
{{ super() }}
<script src="scripts/controllers/LiveEventsManager.js"></script>
{% endblock %}

{% block externalScripts %}
{{ super() }}
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAIhCdsCkAXbJnK2FUpFMFRYb5JXrP7Dug&callback=LiveEventsManager.impostaMappa" async defer></script>
{% endblock %}